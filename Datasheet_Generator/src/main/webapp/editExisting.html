<!DOCTYPE html>
<!search for an existing part in registry page>
<html>
    
    <head>
        <title>Owl</title>
        <link rel="shortcut icon" href="images/logo-Owl-Color_cropped.ico">
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
    </head>
    
    <body class="container">
        
        <div class="navbar navbar-fixed-top" style ="margin-left:-14px">
            <div class="navbar-inner"> 
                <div class="container">
                    <a class="brand" href="index.html">Owl</a>
                    <ul class="nav">
                        <li class="active"><a href="editExisting.html">Search Existing Parts</a></li>
                        <li><a href="dynamicForm.html">Create Datasheet</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul> 
                    <div id="loginArea">
                        <form id="loginForm" class="navbar-form pull-right">
                            <input id="login_username" name="user" type="text" class="span2" placeholder="Login">
                            <input id="login_password" name="password" type="password" class="span2" placeholder="Password">
                            <input id="btnLogin" type="submit" value="Login" class="btn"/>
                            <div id="loginError"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="page-header" style="margin-top:60px; margin-left:-7px">
            <h1><img style="width: 48px; height: 40px; margin-bottom:5px" src="images/logo-Owl-Color_cropped.png"><small> Search for a Part in The Registry</small></h1>
        </div>
        
        <div><input id="searchName" placeholder="K1114000" style="margin-top:-25px"/></div>
        <button class="btn btn-primary" id="editButton" style="margin-top:7px">Search</button>
        <img id = "loading" style = "position:relative; top:2px;padding-left:10px;" src ="images/ajax-loader.gif" hidden>
        
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> 
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
        <script src="javascript/SessionController.js"></script>        
        <script type="text/javascript" src="libraries/jquery-1.9.1.min.js"></script> 
        <script src="libraries/bootstrap.min.js"></script>      
        
        <script>
        //This is how you get data from the registry
        $("#editButton").click(function(){
            $('#loading').show();
            var searchTerm = $('#searchName').attr("placeholder");
            if($('#searchName').val() !== "") {
                searchTerm = $('#searchName').val();
            }
            $.post("ParserServlet", {"name": searchTerm}, function(data) {

                //use data to populate dynamic form after posting it to server for safe keeping
                window.location.replace("dynamicForm.html");
                //page will redirect from server
            });
        });
        </script>
        
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
  ga('create', 'UA-57223580-5', 'auto');
  ga('send', 'pageview');
 
        </script>   

        <script>
            function getCookie(c_name) {
                var c_value = document.cookie;
                var c_start = c_value.indexOf(" " + c_name + "=");
                if (c_start === -1) {
                    c_start = c_value.indexOf(c_name + "=");
                }
                if (c_start === -1) {
                    c_value = null;
                }
                else {
                    c_start = c_value.indexOf("=", c_start) + 1;
                    var c_end = c_value.indexOf(";", c_start);
                    if (c_end === -1) {
                        c_end = c_value.length;
                    }
                    c_value = unescape(c_value.substring(c_start, c_end));
                }
                return c_value;
            }
        
    if(getCookie("owl") !== "authenticated") {
            window.location.replace("login.html");
        }
        </script>
        
        <footer>
            <div class="container" align="center">
                <p>Designed and built by <a href="http://2013.igem.org/Team:BostonU">BU iGEM Team</a> at <a href="http://cidarlab.org">CIDAR</a></p>
                <p>Code licensed under <a href="license.html">LICENSE</a></p>
            </div>
        </footer>
        
    </body>

</html>
